"use strict";(self.webpackChunksearchassist=self.webpackChunksearchassist||[]).push([[468],{70468:(I,d,r)=>{r.r(d),r.d(d,{PresentableModule:()=>S});var p=r(36895),o=r(29197),c=r(66166),h=r(56622),t=r(94650),u=r(22404),g=r(51483),f=r(35605),b=r(65728),m=r(43416);const P=[{path:"",component:(()=>{class s{constructor(e,i,l,n,F){this.workflowService=e,this.appSelectionService=i,this.notificationService=l,this.service=n,this.route=F,this.selectedSort="asc",this.checksort="fieldName",this.selectionflag=!0,this.isSearchable=!0,this.page=0,this.limit=10,this.searchValue="",this.allpresentableFields=[],this.presentable=[],this.nonPresentable=[],this.isLoading=!1,this.loader=!1,this.method_type="",this.isaddLoading=!1}ngOnInit(){this.selectedApp=this.workflowService.selectedApp(),this.indexPipelineId=this.workflowService.selectedIndexPipeline(),this.queryPipelineId=this.workflowService.selectedQueryPipeline()?this.workflowService.selectedQueryPipeline()._id:"",this.getAllpresentableFields(),this.querySubscription=this.appSelectionService.queryConfigSelected.subscribe(e=>{this.indexPipelineId=this.workflowService.selectedIndexPipeline(),this.queryPipelineId=this.workflowService.selectedQueryPipeline()?this.workflowService.selectedQueryPipeline()._id:""})}displayFields(e,i){this.isLoading=!1,this.allpresentableFields=i,e?(this.presentable=[],this.allpresentableFields.forEach(l=>{this.presentable.push(l)})):(this.nonPresentable=[],this.allpresentableFields.forEach(l=>{this.nonPresentable.push(l)}))}getAllpresentableFields(){const e=this.route.snapshot.data.presentables;e.error?this.displayError():this.displayFields(!0,e.data)}getAddpopuppresentableField(e){e||this.getPresentableFields(!1)}getRecord(e){let i=e.record;if(i?.fieldIds?.length>0||i?.length>0){let n={url:"add.presentableFields",quaryparms:{streamId:this.selectedApp._id,indexPipelineId:this.indexPipelineId,queryPipelineId:this.queryPipelineId},payload:i};"delete"==e.type?this.removeRecord({url:"delete.presentableFields",quaryparms:{streamId:this.selectedApp._id,indexPipelineId:this.indexPipelineId,queryPipelineId:this.queryPipelineId,fieldId:i[0]}}):this.addRecords(n)}else this.notificationService.notify("Please select the fields to proceed","error")}presentableSort(e){this.method_type="search",this.getPresentableFields("datatable"==e.componenttype,e)}removeRecord(e){this.service.invoke(e.url,e.quaryparms).subscribe(l=>{this.getPresentableFields(!0),this.notificationService.notify("Field removed succesfully","success")},l=>{this.notificationService.notify("Failed to remove Fields","error")})}openUserMetaTagsSlider(){this.appSelectionService.topicGuideShow.next(null)}addRecords(e){this.isaddLoading=!0,this.service.invoke(e.url,e.quaryparms,e.payload).subscribe(i=>{this.isaddLoading=!1,this.getPresentableFields(!0),this.notificationService.notify("Field added succesfully","success")},i=>{this.notificationService.notify("Failed to add Fields","error")})}presentableSearch(e){this.searchValue=e.searchvalue,this.method_type="search",this.getPresentableFields("datatable"==e.componenttype)}presentablepage(e){this.page=e,this.getPresentableFields(!0)}displayError(){this.notificationService.notify("Failed to get presentable fields","error")}getPresentableFields(e,i){const l={isSelected:e,sortField:i?.fieldname?.length>0?i.fieldname:"fieldName",orderType:i?.type?.length>0?i.type:"asc",indexPipelineId:this.indexPipelineId,streamId:this.selectedApp._id,queryPipelineId:this.queryPipelineId,searchKey:this.searchValue?this.searchValue:""};"search"!==this.method_type&&(this.isLoading=!0),this.service.invoke("get.presentableFields",l).subscribe(n=>{this.displayFields(e,n.data)},n=>{this.displayError()})}ngOnDestroy(){this.querySubscription&&this.querySubscription.unsubscribe()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u.z),t.Y36(c.n),t.Y36(g.g),t.Y36(h.Q),t.Y36(o.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-presentable"]],inputs:{presentabledata:"presentabledata",selectedcomponent:"selectedcomponent"},decls:11,vars:15,consts:[[1,"widget-header-block"],["id","sa_settings_presentable",1,"widget-header"],["tooltipClass","tooltip-global-","placement","right-center",1,"module-topic",3,"container","ngbTooltip","click"],[1,"si-topic-guide-1"],["id","sa_settings_presentable_desc",1,"widget-desc"],[3,"tablefieldvalues","popupfieldvalues","maxpageno","isLoading","isaddLoading","emitRecord","sort","searchModel","calladdApi"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span",2),t.NdJ("click",function(){return i.openUserMetaTagsSlider()}),t.ALo(5,"translate"),t._UZ(6,"i",3),t.qZA()(),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"app-list-fields",5),t.NdJ("emitRecord",function(n){return i.getRecord(n)})("sort",function(n){return i.presentableSort(n)})("searchModel",function(n){return i.presentableSearch(n)})("calladdApi",function(n){return i.getAddpopuppresentableField(n)}),t.qZA()()),2&e&&(t.xp6(2),t.hij("",t.lcZ(3,9,"search_settings_Presentable")," "),t.xp6(2),t.s9C("ngbTooltip",t.lcZ(5,11,"contentSource_topic_guide")),t.Q6J("container","body"),t.xp6(4),t.Oqu(t.lcZ(9,13,"search_settings_Presentable_desc")),t.xp6(2),t.Q6J("tablefieldvalues",i.presentable)("popupfieldvalues",i.nonPresentable)("maxpageno",i.max_pageno)("isLoading",i.isLoading)("isaddLoading",i.isaddLoading))},dependencies:[f.e,b._L,m.X$],styles:[".widget-header-block[_ngcontent-%COMP%]{padding:35px 20px 15px 35px}.widget-header-block[_ngcontent-%COMP%]   .widget-header[_ngcontent-%COMP%]{font-weight:500;font-size:18px;line-height:17px;color:#121314;padding-bottom:10px}.widget-header-block[_ngcontent-%COMP%]   .widget-desc[_ngcontent-%COMP%]{font-weight:400;font-size:12px;line-height:15px;color:#777a80}"]}),s})()}];let y=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[o.Bz.forChild(P),o.Bz]}),s})();var v=r(48863);let S=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,y,v.V]}),s})()}}]);